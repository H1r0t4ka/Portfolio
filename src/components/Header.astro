<header
    class="flex justify-center items-center py-3 px-4 z-full fixed top-0 left-0 w-full backdrop-blur-md shadow-sm"
>
    <div class="flex justify-between items-center w-full py-3 px-4 max-w-6xl">
        <!-- Perfil -->
        <div class="flex items-center gap-3">
            <img
                class="rounded-full w-12 h-12"
                src="./src/assets/me.jpg"
                alt="Profile picture"
            />
            <p class="font-bold">Juan Manuel Quevedo Gonzalez</p>
        </div>

        <!-- Botón hamburguesa (visible solo en móvil) -->
        <button
            id="menu-toggle"
            class="sm:hidden p-2 rounded-lg"
            aria-label="Abrir menú"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6 text-gray-800"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>

        <!-- Nav -->
        <nav
            id="nav-menu"
            class="hidden sm:flex flex-col sm:flex-row items-center sm:items-start gap-y-4 sm:gap-y-0 sm:gap-x-8 text-center sm:text-left absolute sm:static top-full left-0 w-full sm:w-auto shadow-lg sm:shadow-none rounded-b-2xl sm:rounded-none p-6 sm:p-0 transition-all duration-300 opacity-0 scale-y-0 origin-top"
        >
            <a
                class="transition duration-300 ease-in-out hover:scale-120"
                href="#sobre-mi">Sobre mí</a
            >
            <a
                class="transition duration-300 ease-in-out hover:scale-120"
                href="#trabajos">Trabajos</a
            >
            <a
                class="transition duration-300 ease-in-out hover:scale-120"
                href="#proyectos">Proyectos</a
            >
        </nav>

        <!-- Botones -->
        <div class="flex gap-3">
            <!-- Botón idioma -->
            <button
                id="lang-toggle"
                class="p-2 rounded-full transition duration-300 ease-in-out hover:scale-120"
                aria-label="Cambiar idioma"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-6 h-6"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M12 3c4.97 0 9 4.03 9 9s-4.03 9-9 9-9-4.03-9-9 4.03-9 9-9zm0 0c1.5 2.5 2.5 5.5 2.5 9S13.5 18.5 12 21m0-18C10.5 4.5 9.5 7.5 9.5 12S10.5 19.5 12 21m-8-9h16"
                    ></path>
                </svg>
            </button>

            <!-- Botón modo oscuro -->
            <button
                id="theme-toggle"
                class="p-2 rounded-full transition delay-150 duration-300 ease-in-out hover:scale-120"
                aria-label="Cambiar tema"
            >
                <!-- 🌙 SVG luna -->
                <svg
                    id="moon-icon"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-6 h-6 block dark:hidden"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M21.752 15.002A9.718 9.718 0 0112.002 21a9.719 9.719 0 01-9.75-9.75 9.72 9.72 0 0110.5-9.705 7.5 7.5 0 009 9.457z"
                    >
                    </path>
                </svg>

                <!-- ☀️ SVG sol -->
                <svg
                    class="w-6 h-6 hidden dark:block"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    fill="none"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 5V3m0 18v-2M7.05 7.05 5.636 5.636m12.728 12.728L16.95 16.95M5 12H3m18 0h-2M7.05 16.95l-1.414 1.414M18.364 5.636 16.95 7.05M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"
                    >
                    </path>
                </svg>
            </button>
        </div>
    </div>
</header>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const menuToggle = document.getElementById("menu-toggle");
        const navMenu = document.getElementById("nav-menu");

        if (!menuToggle || !navMenu) return;

        const showMenu = () => {
            navMenu.classList.remove("hidden");
            navMenu.classList.add(
                "flex",
                "flex-col",
                "bg-white",
                "transition-all",
                "duration-300",
                "ease-in-out",
                "opacity-100",
                "scale-y-100",
                "origin-top",
            );
        };

        const hideMenu = () => {
            navMenu.classList.add("opacity-0", "scale-y-0");
            navMenu.classList.remove("opacity-100", "scale-y-100");
            setTimeout(() => {
                navMenu.classList.add("hidden");
                navMenu.classList.remove("flex", "flex-col", "bg-white");
            }, 300);
        };

        const handleToggle = () => {
            if (window.innerWidth >= 640) return; // no aplicar animaciones en escritorio
            const isHidden = navMenu.classList.contains("hidden");
            if (isHidden) showMenu();
            else hideMenu();
        };

        menuToggle.addEventListener("click", handleToggle);

        // Cierra el menú al hacer clic en un enlace (solo móvil)
        navMenu.querySelectorAll("a").forEach((link) => {
            link.addEventListener("click", () => {
                if (window.innerWidth < 640) hideMenu();
            });
        });

        // ✅ Estado correcto al cargar o redimensionar
        const handleResize = () => {
            if (window.innerWidth >= 640) {
                // Estado fijo en escritorio, sin animación
                navMenu.classList.remove(
                    "hidden",
                    "opacity-0",
                    "scale-y-0",
                    "bg-white",
                    "transition-all",
                    "duration-300",
                    "ease-in-out",
                );
                navMenu.classList.add("flex", "flex-row");
            } else {
                // Estado inicial oculto en móvil
                navMenu.classList.add("hidden");
                navMenu.classList.remove("flex-row");
            }
        };

        handleResize(); // 👈 asegura el estado correcto al cargar
        window.addEventListener("resize", handleResize);
    });
</script>
